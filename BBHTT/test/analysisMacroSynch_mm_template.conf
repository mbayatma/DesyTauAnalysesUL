######################################################
# configuration file for SynchNTupleProducer_mm_Run2 
#####################################################

era = 
isData = 
16_pre: JSON = DesyTauAnalyses/Producer/test/json/Cert_271036-284044_13TeV_Legacy2016_Collisions16_JSON.txt
16_post: JSON = DesyTauAnalyses/Producer/test/json/Cert_271036-284044_13TeV_Legacy2016_Collisions16_JSON.txt
17: JSON = DesyTauAnalyses/Producer/test/json/Cert_294927-306462_13TeV_UL2017_Collisions17_GoldenJSON.txt
18: JSON = DesyTauAnalyses/Producer/test/json/Cert_314472-325175_13TeV_Legacy2018_Collisions18_JSON.txt

ApplyPUweight = 
16_pre: PileUpDataFileName = DesyTauAnalyses/Common/data/PileUpDistrib/Data_PileUp_UL2016_preVFP_69p2.root
16_post: PileUpDataFileName = DesyTauAnalyses/Common/data/PileUpDistrib/Data_PileUp_UL2016_postVFP_69p2.root
17: PileUpDataFileName = DesyTauAnalyses/Common/data/PileUpDistrib/Data_PileUp_UL2017_69p2.root
18: PileUpDataFileName = DesyTauAnalyses/Common/data/PileUpDistrib/Data_PileUp_UL2018_69p2.root
16_pre: PileUpMCFileName = DesyTauAnalyses/Common/data/PileUpDistrib/MC_PileUp_UL2016_preVFP.root
16_post: PileUpMCFileName = DesyTauAnalyses/Common/data/PileUpDistrib/MC_PileUp_UL2016_postVFP.root
17: PileUpMCFileName = DesyTauAnalyses/Common/data/PileUpDistrib/MC_PileUp_UL2017.root
18: PileUpMCFileName = DesyTauAnalyses/Common/data/PileUpDistrib/MC_PileUp_UL2018.root
PileUpMCHistName = pileup

ApplyLepSF =
16_pre: CorrectionWorkspaceFile = DesyTauAnalyses/Common/data/CorrectionWS_IC/htt_scalefactors_UL_2016preVFP_v2.root
16_post: CorrectionWorkspaceFile = DesyTauAnalyses/Common/data/CorrectionWS_IC/htt_scalefactors_UL_2016postVFP_v2.root
17: CorrectionWorkspaceFile = DesyTauAnalyses/Common/data/CorrectionWS_IC/htt_scalefactors_UL_2017_v2.root 
18: CorrectionWorkspaceFile = DesyTauAnalyses/Common/data/CorrectionWS_IC/htt_scalefactors_UL_2018_v2.root

ApplyRecoilCorrections = false
ApplyRecoilOnGenerator = true
ApplySimpleRecoilCorrections = true

16_pre: PFRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PFMET_2016.root
16_post: PFRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PFMET_2016.root
17: PFRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PFMET_2017.root
18: PFRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PFMET_2018.root
16_pre: PuppiRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PuppiMET_2016.root
16_post: PuppiRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PuppiMET_2016.root
17: PuppiRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PuppiMET_2017.root
18: PuppiRecoilFileName = HTT-utilities/RecoilCorrections_KIT/data/Type1_PuppiMET_2018.root

ApplyTopPtReweighting = true
a_topPtWeight = 0.088
b_topPtWeight = -0.00087
c_topPtWeight = 9.2e-07
max_pt_topPtWeight = 472.0

ApplyZMassPtReweighting = true

16_pre: ZMassPtWeightsFileName = DesyTauAnalyses/Common/data/DY_NLO_2016_pre.root
16_post: ZMassPtWeightsFileName = DesyTauAnalyses/Common/data/DY_NLO_2016_post.root
17: ZMassPtWeightsFileName = DesyTauAnalyses/Common/data/DY_NLO_2017.root
18: ZMassPtWeightsFileName = DesyTauAnalyses/Common/data/DY_NLO_2018.root
ZMassPtWeightsHistName = DY_NLO
ZMassPtWeightsBHistName = DY_Btag_NLO

#### MET filters ####
# met filters ( from https://twiki.cern.ch/twiki/bin/viewauth/CMS/MissingETOptionalFiltersRun2 )
ApplyMetFilters = true
16_pre: MC: num_met_filters = 6 # adjust accordingly
16_pre: data: num_met_filters = 7 
16_pre: embedded: num_met_filters = 7 
16_post: MC: num_met_filters = 6 # adjust accordingly
16_post: data: num_met_filters = 7 
16_post: embedded: num_met_filters = 7 
17: MC: num_met_filters = 7 
17: data: num_met_filters = 8 
17: embedded: num_met_filters = 8 
18: MC: num_met_filters = 7 
18: data: num_met_filters = 8 
18: embedded: num_met_filters = 8 
met_filter_1 = Flag_HBHENoiseFilter
met_filter_2 = Flag_HBHENoiseIsoFilter
met_filter_3 = Flag_globalSuperTightHalo2016Filter
met_filter_4 = Flag_EcalDeadCellTriggerPrimitiveFilter
met_filter_5 = Flag_goodVertices
met_filter_6 = Flag_BadPFMuonFilter
16_pre: data: met_filter_7 = Flag_eeBadScFilter
16_pre: embedded: met_filter_7 = Flag_eeBadScFilter
16_post: data: met_filter_7 = Flag_eeBadScFilter
16_post: embedded: met_filter_7 = Flag_eeBadScFilter
17: met_filter_7 = ecalBadCalibReducedMINIAODFilter
17: data: met_filter_8 = Flag_eeBadScFilter
17: embedded: met_filter_8 = Flag_eeBadScFilter  
18: met_filter_7 = ecalBadCalibReducedMINIAODFilter
18: data: met_filter_8 = Flag_eeBadScFilter
18: embedded: met_filter_8 = Flag_eeBadScFilter

ApplyBTagScaling = 
ApplyBTagReshape = 
16_pre: bJetEtaCut = 2.4
16_post: bJetEtaCut = 2.4
17: bJetEtaCut = 2.5
18: bJetEtaCut = 2.5
BTagAlgorithm = DeepFlavour
BTagDiscriminator1 = pfDeepFlavourJetTags:probb
BTagDiscriminator2 = pfDeepFlavourJetTags:probbb
BTagDiscriminator3 = pfDeepFlavourJetTags:problepb
16_pre: btagCut = 0.3093  
16_post: btagCut = 0.3093  
17: btagCut = 0.3033  
18: btagCut = 0.2770
16_pre: BtagSfFile = DesyTauAnalyses/Common/data/BTagReshaping/wp_deepJet_106XUL16preVFP_v2_reformatted.csv
16_post: BtagSfFile = DesyTauAnalyses/Common/data/BTagReshaping/wp_deepJet_106XUL16postVFP_v3_reformatted.csv
17: BtagSfFile = DesyTauAnalyses/Common/data/BTagReshaping/wp_deepJet_106XUL17_v3_reformatted.csv
18: BtagSfFile = DesyTauAnalyses/Common/data/BTagReshaping/wp_deepJet_106XUL18_v2_reformatted.csv
16_pre: BTagReshapeFileName = DesyTauAnalyses/Common/data/BTagReshaping/btag_reshape_2016_pre.root
16_post: BTagReshapeFileName = DesyTauAnalyses/Common/data/BTagReshaping/btag_reshape_2016_post.root 
17: BTagReshapeFileName = DesyTauAnalyses/Common/data/BTagReshaping/btag_reshape_2017.root
18: BTagReshapeFileName = DesyTauAnalyses/Common/data/BTagReshaping/btag_reshape_2018.root
16_pre: BtagMCeffFile = DesyTauAnalyses/Common/data/Eff_DeepFlavour_2016_medium_all_proc_DeepFlavour_medium_inclusive_inclusive.root
16_post: BtagMCeffFile = DesyTauAnalyses/Common/data/Eff_DeepFlavour_2016_medium_all_proc_DeepFlavour_medium_inclusive_inclusive.root
17: BtagMCeffFile = DesyTauAnalyses/Common/data/Eff_DeepFlavour_2017_medium_all_proc_DeepFlavour_medium_inclusive_inclusive.root
18: BtagMCeffFile = DesyTauAnalyses/Common/data/Eff_DeepFlavour_2018_medium_all_proc_DeepFlavour_medium_inclusive_inclusive.root

ApplyIpCorrection = false
ApplyIpSigCorrection = false
16_pre: IpCorrectionFileName = DesyTauAnalyses/Common/data/ip_2016.root
16_post: IpCorrectionFileName = DesyTauAnalyses/Common/data/ip_2016.root
17: IpCorrectionFileName = DesyTauAnalyses/Common/data/ip_2017.root
18: IpCorrectionFileName = DesyTauAnalyses/Common/data/ip_2018.root

ApplyTrigger = true
16_post: MuonFilterNames = hltL3crIsoL1sMu20L1f0L2f10QL3f22QL3trkIsoFiltered0p09,hltL3fL1sMu20L1f0Tkf22QL3trkIsoFiltered0p09,hltL3crIsoL1sSingleMu20erL1f0L2f10QL3f22QL3trkIsoFiltered0p09,hltL3fL1sMu20erL1f0Tkf22QL3trkIsoFiltered0p09 
16_pre: MuonFilterNames = hltL3crIsoL1sMu20L1f0L2f10QL3f22QL3trkIsoFiltered0p09,hltL3fL1sMu20L1f0Tkf22QL3trkIsoFiltered0p09,hltL3crIsoL1sSingleMu20erL1f0L2f10QL3f22QL3trkIsoFiltered0p09,hltL3fL1sMu20erL1f0Tkf22QL3trkIsoFiltered0p09
17: MuonFilterNames =hltL3crIsoL1sSingleMu22L1f0L2f10QL3f24QL3trkIsoFiltered0p07,hltL3crIsoL1sMu22Or25L1f0L2f10QL3f27QL3trkIsoFiltered0p07
18: MuonFilterNames = hltL3crIsoL1sSingleMu22L1f0L2f10QL3f24QL3trkIsoFiltered0p07,hltL3crIsoL1sMu22Or25L1f0L2f10QL3f27QL3trkIsoFiltered0p07

# muon kinematic cuts
ptMuonCut = 28
ptMuonProbeCut = 15
etaMuonCut = 2.1
etaMuonProbeCut = 2.4
dxyMuonCut = 0.045
dxyMuonProbeCut = 0.045
dzMuonCut = 0.2
dzMuonProbeCut = 0.2
isoMuonCut = 0.15
IsoDR03 = false

# topological cuts
dRleptonsCut = 0.5
dPhileptonsCut = 3.5 # irrelevant
DRTrigMatch = 0.5
OppositeSign = true
DimuonMassCut = 50

SingleMuonTriggerPtCut = 0
SingleMuonTriggerEtaCut = 2.4

JetEtaCut = 4.7
JetPtHighCut = 30
JetPtLowCut = 20
dRJetLeptonCut = 0.5

applyJES = 0
MuonMomentumScale = 1.0

